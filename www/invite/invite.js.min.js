var myApp=angular.module("sample.invite",["ui.router","auth0"])
myApp.config(["$stateProvider",function(n){n.state("invite",{url:"/invite",controller:"InviteController",templateUrl:"invite/invite.html",data:{requiresLogin:!1}})}]),myApp.controller("InviteController",["$location","growl","BackandService","PublicService","$scope","$state","APP_CONSTANT","TEAM_CONSTANT",function(n,i,e,a,t,o,l,r){function s(n){var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
return i.test(n)}function u(n,i){for(var t=0;t<n.length;t++)e.invitationEmail(n[t],i).then(function(n){console.log("email sent to"),console.log(n)},function(n){a.errorCallbackFunction(n,"Send Email Failed. Please Try Again")})}t.sent=!1,t.loading=!1,t.authProfile=JSON.parse(window.localStorage.getItem("AuthProfile")),t.newInvitation={},null!=t.authProfile&&(t.newInvitation.sender_name=t.authProfile.nickname),t.shareOnFacebook=function(){var n=l.DOMAIN+"home",i="Check Out This Awesome App That Will Change How You Do Your Business",e="DropBug : The ABC of Your Business. Join Malaysia's first business tool and hub for suppliers, stockists, and dropships.",t=null
a.shareOnFacebook(n,i,t,e)},t.shareOnTwitter=function(){var n=l.DOMAIN+"home",i="Check Out DropBug"
a.shareOnTwitter(n,i)},t.addEmail=function(){$("#emailInvitation").append($("<input type='email' class='form-control' placeholder='Your friend email'> required"))},t.sendInvitation=function(){var n=$("#emailInvitation").find("input")
t.validEmail=[],t.invalidEmail=[]
for(var i=0;i<n.length;i++){var e=n[i].value
null!=e&&""!=e&&(s(e)?t.validEmail.push(e):t.invalidEmail.push(e))}t.validEmail.length>0&&u(t.validEmail,t.newInvitation.sender_name),0==t.validEmail.length&&0==t.invalidEmail.length?t.empty=!0:t.sent=!0},t.sendAgain=function(){t.sent=!1}}])
