var myApp=angular.module("sample.register",["ui.router","auth0"])
myApp.config(["$stateProvider","$urlRouterProvider","authProvider",function(e,o,t){e.state("register",{url:"/register?user_type",controller:"RegisterControllerHelper",templateUrl:"register/register.html",data:{requiresLogin:!0}})}]),myApp.controller("RegisterController",["$scope","$state","USER_TYPE",function(e,o,t){e.USER_TYPE=t,e.register=function(e){console.log("Registering as User type "+e),o.go("register",{user_type:e})}}]),myApp.controller("ProfileControllerHelper",["$scope","$stateParams","growl","BackandService","PublicService","auth","$state","USER_TYPE",function(e,o,t,r,s,l,a,n){e.newUser={},e.user_id=o.user_id,e.USER_TYPE=n,e.loading=!1,e.loadMessage="Please Wait For Registration To Complete",e.authProfile=JSON.parse(window.localStorage.getItem("AuthProfile")),null!=e.authProfile.email&&(e.newUser.email=e.authProfile.email),e.createNewUser=function(o){e.loading=!0,e.newUser.picture=e.authProfile.picture,e.newUser.picture_large=e.authProfile.picture_large,e.newUser.cover_photo=e.authProfile.cover_photo,e.newUser.auth_id=e.authProfile.auth_id,e.newUser.user_type=e.user_type,e.newUser.created_at=s.getTimestampinMysql(),e.newUser.updated_at=s.getTimestampinMysql(),console.log(e.newUser.user_type),console.log(e.newUser.auth_id),console.log(e.newUser.email),console.log(e.newUser.picture),console.log(e.newUser.first_name),console.log(e.newUser.last_name),console.log(e.newUser.phone_number),console.log(e.newUser.city),console.log(e.newUser.state),console.log(e.newUser.about),r.addObject("users",e.newUser).then(function(e){if(console.log("Result From Creating new User"),console.log(e),200==e.status){console.log("New record successfully created in 'users' table. ID : "+e.data.id),console.log(e.data.created_at)
var o={}
o.user_id=e.data.id,o.user_type=e.data.user_type,window.localStorage.setItem("UserInSession",JSON.stringify(o)),t.success("Redirecting to Home Page",{title:"Registration Completed!"}),a.go("home")}},function(o){t.error(""+o,{title:"Registration Failed!"}),console.log(o),e.loading=!1})}}]),myApp.controller("RegisterControllerHelper",["$scope","$stateParams","growl","BackandService","PublicService","auth","$state","USER_TYPE",function(e,o,t,r,s,l,a,n){e.newUser={},e.user_type=o.user_type,e.USER_TYPE=n,e.loading=!1,e.loadMessage="Please Wait For Registration To Complete",e.authProfile=JSON.parse(window.localStorage.getItem("AuthProfile")),null!=e.authProfile.email&&(e.newUser.email=e.authProfile.email),e.createNewUser=function(o){e.loading=!0,e.newUser.picture=e.authProfile.picture,e.newUser.auth_id=e.authProfile.auth_id,e.newUser.user_type=e.user_type,e.newUser.created_at=s.getTimestampinMysql(),e.newUser.updated_at=s.getTimestampinMysql(),console.log(e.newUser.user_type),console.log(e.newUser.auth_id),console.log(e.newUser.email),console.log(e.newUser.picture),console.log(e.newUser.first_name),console.log(e.newUser.last_name),console.log(e.newUser.phone_number),console.log(e.newUser.city),console.log(e.newUser.state),console.log(e.newUser.about),r.addObject("users",e.newUser).then(function(e){if(console.log("Result From Creating new User"),console.log(e),200==e.status){console.log("New record successfully created in 'users' table. ID : "+e.data.id),console.log(e.data.created_at)
var o={}
o.user_id=e.data.id,o.user_type=e.data.user_type,o.first_name=e.data.first_name,o.last_name=e.data.last_name,window.localStorage.setItem("UserInSession",JSON.stringify(o)),t.success("Redirecting to Home Page",{title:"Registration Completed!"}),a.go("home")}},function(o){t.error(""+o,{title:"Registration Failed!"}),console.log(o),e.loading=!1})}}])
